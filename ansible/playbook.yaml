- hosts: all
  tasks:
  - name: "Ping {{ inventory_hostname }}"
    ping:
    register: ping_info

  - name: "Show ping_info in console"
    debug:
      msg: "{{ ping_info }}"

- hosts: swarm
  become: true
  roles:
  - docker

- hosts: manager
  become: true
  roles:
  - manager

- hosts: worker
  become: true
  roles:
  - swarm

- hosts: server
  become: true
  roles:
  - nginx 